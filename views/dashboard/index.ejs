<%- include('../partials/header') %> <%- include('../partials/sidebar') %>

<div class="layout__body">
  <h1 class="dashboard__title">Welcome <%= user.name %></h1>

  <% if (userNotes.length > 0) { %>
  <div class="dashboard__notes">
    <h2>Your Notes</h2>
    <ul>
      <% userNotes.forEach(note => { %>
      <li>
        <a href="/notes/<%= note._id %>"> <%= note.title %> </a>
      </li>
      <% }) %>
    </ul>
  </div>
  <% } else { %>
  <div class="dashboard__notes">
    <p>You don't have any notes yet.</p>
    <a href="/notes/new" class="dashboard__create-note-button"
      >Create New Note <i class="las la-plus-square"></i
    ></a>
  </div>
  <% } %>
</div>

<style>
  .layout__body {
    padding: 1rem;
    background: #f5f5f5;
    height: 100%;
    padding: 3rem 5rem;
  }
  .dashboard__title {
    font-size: 2rem;
    margin-bottom: 1rem;
    color: #2a2438;

    font-weight: 300;
  }
</style>

<script>
  // check for inital login in local storage and show toast
  if (sessionStorage.getItem("initialLogin") !== null) {
    Toastify({
      text: "You're logged in! ðŸŽ‰ ",
      duration: 3000,
      destination: "/notes",
      newWindow: false,
      close: true,
      gravity: "top", // `top` or `bottom`
      position: "center", // `left`, `center` or `right`
      stopOnFocus: true, // Prevents dismissing of toast on hover
      style: {
        background: "linear-gradient(to right, #c340bfc5, #3dd1e7)",
      },
      onClick: function () {}, // Callback after click
    }).showToast();

    sessionStorage.removeItem("initialLogin");
  }
</script>

<%- include('../partials/footer') %>
